# PNG 转 ICO 工具

## 简介
这是一个使用 Python 和 PyQt5 开发的简单工具，用于将 PNG 图像文件转换为 ICO 图标文件。用户可以选择 PNG 文件，设置图标尺寸，然后将其转换为 ICO 文件。该工具还提供了图像预览和进度显示功能。

## 功能特性
- **文件选择**：支持选择本地的 PNG 图像文件。
- **尺寸设置**：可以自定义生成 ICO 图标的尺寸。
- **图像预览**：在转换前可以预览所选的 PNG 图像。
- **进度显示**：在转换过程中显示进度条。
- **错误处理**：对文件加载和转换过程中的错误进行提示。

## 安装依赖
在运行该程序之前，需要确保你的 Python 环境中安装了以下依赖库：
- `PyQt5`：用于创建图形用户界面。
- `Pillow`：用于处理图像文件。

你可以使用以下命令来安装这些依赖：
```bash
pip install PyQt5 pillow
```

## 使用方法
1. **启动程序**：运行 `png_to_ico_converter.py` 文件（假设你已经将文件重命名为这个名称）。
```bash
python png_to_ico_converter.py
```
2. **选择 PNG 文件**：点击“选择 PNG 文件”按钮，在弹出的文件选择对话框中选择要转换的 PNG 文件。
3. **设置图标尺寸**：通过“图标尺寸”下拉框选择生成 ICO 图标的尺寸。
4. **转换为 ICO**：点击“转换为 ICO”按钮，在弹出的保存对话框中选择保存 ICO 文件的位置和文件名。
5. **查看结果**：转换完成后，会弹出提示框显示转换结果。如果转换成功，你可以在指定的保存位置找到生成的 ICO 文件。

## 注意事项
- **文件大小限制**：如果选择的 PNG 文件大小超过 5MB，程序会弹出警告提示，询问是否继续转换。
- **异常处理**：在文件加载或转换过程中，如果出现错误，程序会弹出提示框显示错误信息。

## 代码结构
- `ConvertThread` 类：继承自 `QThread`，用于在后台线程中执行 PNG 到 ICO 的转换操作。
- `PngToIcoConverter` 类：继承自 `QMainWindow`，用于创建主窗口和处理用户界面的交互。
- `initUI` 方法：初始化用户界面，包括按钮、标签、进度条等。
- `select_png` 方法：处理“选择 PNG 文件”按钮的点击事件，打开文件选择对话框。
- `load_image` 方法：加载所选的 PNG 文件，并在界面上显示预览。
- `convert_to_ico` 方法：处理“转换为 ICO”按钮的点击事件，打开保存对话框并启动转换线程。
- `start_conversion` 方法：创建并启动转换线程，同时显示进度对话框。
- `update_progress` 方法：更新进度对话框的进度条。
- `conversion_finished` 方法：处理转换完成后的事件，关闭进度对话框并显示转换结果。

## 贡献
如果你发现任何问题或有改进建议，请随时提交 Issue 或 Pull Request。

## 许可证
该项目采用 [MIT 许可证](https://opensource.org/licenses/MIT)。

希望这个 README 对你有帮助！如果有任何疑问，请随时提问。 
